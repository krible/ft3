<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Распечатать визитки</title>
  <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="/tips/css/style.css" rel="stylesheet">
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script type="text/javascript" src="/tips/js/jquery.qrcode.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
</head>

<body>
  <script id="content" type="text/x-handlebars-template">
    {{#each visas}}
    <div class="visa">
      <div class="qr">

      </div>
      <div class="name">
        {{username}}
      </div>
      <div class="url">
        {{url}}
      </div>
    </div>
    {{/each}}
  </script>
  <div id="print"></div>

  <script type="text/javascript" src="/tips/js/content.js"></script>
  <script type="text/javascript">
    var rowData = {
      visas: []
    };
    getContent(function(data) {
      for (var i = 0; i < 10; i++) {
        rowData.visas.push(data);
      }
      $('#print').html(template(rowData));
      $('.qr').qrcode({
        width: 100,
        height: 100,
        text: data.url
      });


      window.print();
    });
  </script>
  
  
  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
      (function (d, w, c) {
          (w[c] = w[c] || []).push(function() {
              try {
                  w.yaCounter33362788 = new Ya.Metrika({
                      id:33362788,
                      clickmap:true,
                      trackLinks:true,
                      accurateTrackBounce:true
                  });
              } catch(e) { }
          });

          var n = d.getElementsByTagName("script")[0],
              s = d.createElement("script"),
              f = function () { n.parentNode.insertBefore(s, n); };
          s.type = "text/javascript";
          s.async = true;
          s.src = "https://mc.yandex.ru/metrika/watch.js";

          if (w.opera == "[object Opera]") {
              d.addEventListener("DOMContentLoaded", f, false);
          } else { f(); }
      })(document, window, "yandex_metrika_callbacks");
  </script>
  <noscript><div><img src="https://mc.yandex.ru/watch/33362788" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
  <!-- /Yandex.Metrika counter -->

  
  
</body>

</html>
